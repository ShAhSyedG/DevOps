jenkins:
  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: ${JENKINS_ADMIN_ID}
          password: ${JENKINS_ADMIN_PASSWORD}
  clouds:
    - amazonEC2:
        name: "ec2"
        instanceCapStr: 20
        # this shouldn't be needed, since without explicit creds this should already be used
        # but let's be explicit to avoid issues.
        useInstanceProfileForCredentials: true
        # Reminder: the following key has multiple lines
        sshKeysCredentialsId: "hello"
        noDelayProvisioning: true
        region: "ap-south-1"
        templates:
          - description: "Auto configured EC2 Agent Small"
            type: "T2Small"
            labelString: "Small"
            <<: *x-ec2_anchor  # Use the correct anchor name

          - description: "Auto configured EC2 Agent Large"
            type: "T2Xlarge"
            labelString: "Large"
            <<: *x-ec2_anchor  # Use the correct anchor name

x-ec2_anchor: &ec2_anchor
  associatePublicIp: false
  connectBySSHProcess: false
  connectionStrategy: PRIVATE_IP
  deleteRootOnTermination: false
  ebsOptimized: false
  idleTerminationMinutes: "10"
  maxTotalUses: -1
  monitoring: false
  numExecutors: 1
  stopOnTerminate: false
  tenancy: Default
  useEphemeralDevices: false
  zone: "ap-south-1"
  ami: "ami-0100c8a8309686e55"
  securityGroups: "sg-0512aa411c500d860"
  remoteFS: "/home/ec2-user"
  remoteAdmin: "ec2-user"
  mode: "NORMAL"
  amiType:
    unixData:
      rootCommandPrefix: "sudo"
      slaveCommandPrefix: "sudo -u ec2-user"
      sshPort: "61120"
